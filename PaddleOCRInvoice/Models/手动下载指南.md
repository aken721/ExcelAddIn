# 模型文件手动下载指南

由于百度BOS存储链接可能不稳定，这里提供多种下载方案。

## ⚠️ 重要说明

PaddleOCR v5 的模型可能还未正式发布，我们使用 **PP-OCRv4** 模型作为替代，效果同样出色！

## 方案1: 使用PowerShell脚本自动下载（推荐）

```powershell
cd Models
.\下载模型文件.ps1
```

## 方案2: 手动从GitHub下载

### 1. 检测模型（Detection Model）

**下载地址** (推荐使用 PP-OCRv4):
- GitHub: https://github.com/PaddlePaddle/PaddleOCR/releases/download/v2.9/ch_PP-OCRv4_det_infer.tar
- 百度网盘: 链接见官方文档

**安装步骤**:
1. 下载 tar 文件并解压
2. 将解压后的文件夹**重命名为** `det_infer`
3. 移动到 `Models/det_infer/`

> **注意**: 使用通用文件夹名称 `det_infer`，便于后续升级模型版本

### 2. 识别模型（Recognition Model）

**下载地址** (推荐使用 PP-OCRv4):
- GitHub: https://github.com/PaddlePaddle/PaddleOCR/releases/download/v2.9/ch_PP-OCRv4_rec_infer.tar
- 百度网盘: 链接见官方文档

**安装步骤**:
1. 下载 tar 文件并解压
2. 将解压后的文件夹**重命名为** `rec_infer`
3. 移动到 `Models/rec_infer/`

### 3. 方向分类模型（Classification Model）

**下载地址**:
- GitHub: https://github.com/PaddlePaddle/PaddleOCR/releases/download/v2.7/ch_ppocr_mobile_v2.0_cls_infer.tar
- 直链: https://paddleocr.bj.bcebos.com/dygraph_v2.0/ch/ch_ppocr_mobile_v2.0_cls_infer.tar

**安装步骤**:
1. 下载 tar 文件并解压
2. 将解压后的文件夹**重命名为** `cls_infer`
3. 移动到 `Models/cls_infer/`

### 4. 字典文件 (ppocr_keys.txt)

**下载地址**:
- GitHub: https://raw.githubusercontent.com/PaddlePaddle/PaddleOCR/main/ppocr/utils/ppocr_keys_v1.txt
- Gitee: https://gitee.com/paddlepaddle/PaddleOCR/raw/main/ppocr/utils/ppocr_keys_v1.txt

保存为 `Models/ppocr_keys.txt`

## 方案3: 从国内镜像下载

### Gitee 镜像

```bash
# 克隆PaddleOCR仓库（Gitee镜像）
git clone https://gitee.com/paddlepaddle/PaddleOCR.git temp_paddleocr

# 使用仓库中的下载脚本
cd temp_paddleocr
# 按照README中的说明下载模型
```

### 百度网盘

访问 PaddleOCR 官方文档，获取百度网盘分享链接：
https://github.com/PaddlePaddle/PaddleOCR/blob/main/doc/doc_ch/models_list.md

## 方案4: 使用浏览器下载管理器

如果命令行下载不稳定，可以：

1. 复制上面的下载链接
2. 使用浏览器下载管理器（如IDM、迅雷等）
3. 手动解压到对应目录

## 解压说明

### Windows PowerShell

```powershell
# 解压 tar 文件
tar -xf ch_PP-OCRv4_det_infer.tar
tar -xf ch_PP-OCRv4_rec_infer.tar
tar -xf ch_ppocr_mobile_v2.0_cls_infer.tar

# 重命名为通用文件夹名称（重要！）
Rename-Item -Path "ch_PP-OCRv4_det_infer" -NewName "det_infer"
Rename-Item -Path "ch_PP-OCRv4_rec_infer" -NewName "rec_infer"
Rename-Item -Path "ch_ppocr_mobile_v2.0_cls_infer" -NewName "cls_infer"
```

### Linux/macOS

```bash
# 解压 tar 文件
tar -xf ch_PP-OCRv4_det_infer.tar
tar -xf ch_PP-OCRv4_rec_infer.tar
tar -xf ch_ppocr_mobile_v2.0_cls_infer.tar

# 重命名为通用文件夹名称（重要！）
mv ch_PP-OCRv4_det_infer det_infer
mv ch_PP-OCRv4_rec_infer rec_infer
mv ch_ppocr_mobile_v2.0_cls_infer cls_infer
```

### 7-Zip (如果系统没有tar命令)

1. 右键点击 .tar 文件
2. 选择 "7-Zip" -> "解压到当前文件夹"
3. **重要**: 解压后将文件夹重命名为通用名称（见上面的命名）

## 最终目录结构

下载并解压后，Models 目录应该是这样的：

```
Models/
├── det_infer/                       # 检测模型（通用名称）
│   ├── inference.pdmodel
│   ├── inference.pdiparams
│   └── inference.pdiparams.info
│
├── rec_infer/                       # 识别模型（通用名称）
│   ├── inference.pdmodel
│   ├── inference.pdiparams
│   └── inference.pdiparams.info
│
├── cls_infer/                       # 方向分类模型（通用名称）
│   ├── inference.pdmodel
│   ├── inference.pdiparams
│   └── inference.pdiparams.info
│
├── ppocr_keys.txt                   # 字典文件
├── README.md                        # 原始说明
├── 下载模型文件.ps1                  # 自动下载脚本
└── 手动下载指南.md                   # 本文件
```

> **重要提示**: 使用通用文件夹名称（不含版本号），便于后续升级模型版本时直接替换文件，无需修改代码。

## 验证下载

运行以下命令验证文件是否完整：

```powershell
# 检查必需文件
Get-ChildItem Models -Recurse -Filter "inference.pdmodel"
Get-ChildItem Models -Filter "ppocr_keys.txt"
```

应该看到 3 个 pdmodel 文件和 1 个 keys 文件。

## 模型版本升级说明

由于我们使用通用文件夹名称（`det_infer`、`rec_infer`、`cls_infer`），升级模型版本非常简单：

**升级步骤**:
1. 下载新版本模型（例如 PP-OCRv5）
2. 解压模型文件
3. 重命名为通用文件夹名称（`det_infer` 等）
4. 替换 `Models/` 目录下的对应文件夹
5. **无需修改任何代码**，直接重新运行即可

**示例：从 PP-OCRv4 升级到 PP-OCRv5**:

```powershell
# 下载 v5 模型
Invoke-WebRequest -Uri "https://paddleocr.bj.bcebos.com/PP-OCRv5/chinese/ch_PP-OCRv5_det_infer.tar" -OutFile "det_v5.tar"

# 解压
tar -xf det_v5.tar

# 删除旧模型
Remove-Item Models\det_infer -Recurse -Force

# 重命名并移动新模型
Rename-Item -Path "ch_PP-OCRv5_det_infer" -NewName "det_infer"
Move-Item det_infer Models\
```

这就是使用通用名称的优势！

## 常见问题

### Q: 为什么没有PP-OCRv5？

A: PP-OCRv5 可能还未正式发布或链接已变更。PP-OCRv4 的效果已经非常好，完全可以用于生产环境。

### Q: 下载速度很慢怎么办？

A: 
1. 使用科学上网工具
2. 使用下载管理器（IDM、迅雷等）
3. 从百度网盘下载
4. 使用Gitee镜像

### Q: GitHub下载失败？

A: 使用Gitee镜像或百度网盘下载。

## 参考链接

- PaddleOCR 官方文档: https://github.com/PaddlePaddle/PaddleOCR
- 模型列表: https://github.com/PaddlePaddle/PaddleOCR/blob/main/doc/doc_ch/models_list.md
- Gitee 镜像: https://gitee.com/paddlepaddle/PaddleOCR
- 在线文档: https://paddlepaddle.github.io/PaddleOCR/

## 需要帮助？

如果下载仍然遇到问题，可以：

1. 查看 PaddleOCR 官方 Issues
2. 在项目中提交 Issue
3. 查找网上其他分享的模型文件

祝您顺利完成模型下载！🎉

